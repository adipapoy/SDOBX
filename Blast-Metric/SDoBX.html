<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator SDOB - Metode Peledakan Lengkap</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c2b5e, #1c3f7a);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(90deg, #1a365d, #2d4a7c);
            color: white;
            padding: 25px 30px;
            text-align: center;
            border-bottom: 5px solid #4299e1;
        }
        
        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .flow-diagram {
            background: #e6f7ff;
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
            border: 2px solid #91d5ff;
            text-align: center;
        }
        
        .flow-diagram h3 {
            color: #1a365d;
            margin-bottom: 15px;
        }
        
        .flow-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .step {
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid #1890ff;
            font-weight: 500;
            text-align: center;
            flex: 1;
            min-width: 120px;
        }
        
        .arrow {
            font-size: 24px;
            color: #1890ff;
            font-weight: bold;
        }
        
        .content {
            padding: 30px;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .input-section {
            background-color: #f0f9ff;
            border-radius: 12px;
            padding: 25px;
            border: 2px solid #bae7ff;
        }
        
        .input-section h3 {
            color: #1d39c4;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #1890ff;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .input-section h3 i {
            font-size: 1.2em;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #262626;
            font-size: 15px;
        }
        
        .input-with-unit {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .input-with-unit input {
            flex: 1;
        }
        
        .unit-display {
            background: #1890ff;
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            font-weight: 600;
            min-width: 70px;
            text-align: center;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #d9d9d9;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            background-color: white;
        }
        
        input:focus, select:focus {
            border-color: #1890ff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(24, 144, 255, 0.2);
        }
        
        .loading-density-note {
            background: #f6ffed;
            border: 1px solid #b7eb8f;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            color: #135200;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin: 30px 0;
        }
        
        button {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .calculate-btn {
            background: linear-gradient(90deg, #1890ff, #096dd9);
            color: white;
        }
        
        .calculate-btn:hover {
            background: linear-gradient(90deg, #096dd9, #0050b3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(24, 144, 255, 0.3);
        }
        
        .reset-btn {
            background: linear-gradient(90deg, #ff4d4f, #cf1322);
            color: white;
        }
        
        .reset-btn:hover {
            background: linear-gradient(90deg, #cf1322, #a8071a);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 77, 79, 0.3);
        }
        
        .results-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .result-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 2px solid #e8e8e8;
            transition: transform 0.3s;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            border-color: #1890ff;
        }
        
        .result-card.primary {
            border-color: #1890ff;
            background: #f0f9ff;
        }
        
        .result-card h4 {
            color: #595959;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .result-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #1890ff;
            margin: 15px 0;
        }
        
        .result-unit {
            color: #8c8c8c;
            font-size: 14px;
            font-style: italic;
        }
        
        .distribution-section {
            background: #fff7e6;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #ffd591;
        }
        
        .distribution-section h3 {
            color: #874d00;
            margin-bottom: 20px;
        }
        
        .lubang-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 2px dashed #d9d9d9;
        }
        
        .lubang-vertikal {
            width: 120px;
            height: 300px;
            border: 3px solid #595959;
            border-radius: 10px;
            position: relative;
            background: #f0f0f0;
            margin-bottom: 20px;
        }
        
        .bagian {
            position: absolute;
            width: 100%;
            left: 0;
            text-align: center;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .stemming {
            background: linear-gradient(90deg, #8c8c8c, #595959);
            border-radius: 7px 7px 0 0;
        }
        
        .loading {
            background: linear-gradient(90deg, #ff4d4f, #cf1322);
        }
        
        .subdrill {
            background: linear-gradient(90deg, #1890ff, #096dd9);
            border-radius: 0 0 7px 7px;
        }
        
        .legenda {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .legenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legenda-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .calculation-steps {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #d9d9d9;
        }
        
        .calculation-steps h3 {
            color: #262626;
            margin-bottom: 20px;
        }
        
        .step-formula {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #1890ff;
            font-family: 'Courier New', monospace;
            font-size: 16px;
        }
        
        .interpretation {
            background: #f6ffed;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #b7eb8f;
        }
        
        .interpretation h3 {
            color: #135200;
            margin-bottom: 15px;
        }
        
        .sdob-scale {
            display: flex;
            height: 40px;
            border-radius: 20px;
            overflow: hidden;
            margin: 20px 0;
            border: 2px solid #d9d9d9;
        }
        
        .scale-segment {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #8c8c8c;
            font-size: 14px;
            border-top: 1px solid #e8e8e8;
            margin-top: 30px;
        }
        
        @media (max-width: 768px) {
            .flow-steps {
                flex-direction: column;
            }
            
            .arrow {
                transform: rotate(90deg);
                margin: 10px 0;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .results-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Kalkulator SDOB - Perhitungan Peledakan Lengkap</h1>
            <p>Menghitung Scale Depth of Burial berdasarkan parameter peledakan dengan loading density tetap 25 kg/m</p>
        </div>
        
        <div class="flow-diagram">
            <h3>Alur Perhitungan</h3>
            <div class="flow-steps">
                <div class="step">Input Parameter</div>
                <div class="arrow">‚Üí</div>
                <div class="step">Hitung Volume</div>
                <div class="arrow">‚Üí</div>
                <div class="step">Hitung Berat Bahan Peledak</div>
                <div class="arrow">‚Üí</div>
                <div class="step">Hitung Panjang Isian & Stemming</div>
                <div class="arrow">‚Üí</div>
                <div class="step">Hitung SDOB</div>
            </div>
        </div>
        
        <div class="content">
            <div class="input-grid">
                <!-- Parameter Dimensi -->
                <div class="input-section">
                    <h3>üìè Parameter Dimensi Lubang</h3>
                    
                    <div class="input-group">
                        <label for="holeDepth">Kedalaman Lubang (H)</label>
                        <div class="input-with-unit">
                            <input type="number" id="holeDepth" step="0.1" placeholder="Contoh: 15.0" min="1">
                            <div class="unit-display">m</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="burden">Burden (B)</label>
                        <div class="input-with-unit">
                            <input type="number" id="burden" step="0.1" placeholder="Contoh: 5.0" min="0.5">
                            <div class="unit-display">m</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="spacing">Spasi (S)</label>
                        <div class="input-with-unit">
                            <input type="number" id="spacing" step="0.1" placeholder="Contoh: 5.5" min="0.5">
                            <div class="unit-display">m</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="subdrill">Subdrill (J)</label>
                        <div class="input-with-unit">
                            <input type="number" id="subdrill" step="0.1" value="1.0" placeholder="Contoh: 1.0" min="0">
                            <div class="unit-display">m</div>
                        </div>
                        <small style="color: #666;">Panjang tambahan di bawah floor level</small>
                    </div>
                </div>
                
                <!-- Parameter Peledakan -->
                <div class="input-section">
                    <h3>üí• Parameter Peledakan</h3>
                    
                    <div class="input-group">
                        <label for="powderFactor">Powder Factor (PF)</label>
                        <div class="input-with-unit">
                            <input type="number" id="powderFactor" step="0.01" placeholder="Contoh: 0.45" min="0.01">
                            <div class="unit-display">kg/m¬≥</div>
                        </div>
                        <small style="color: #666;">Berat bahan peledak per m¬≥ batuan</small>
                    </div>
                    
                    <div class="loading-density-note">
                        <strong>Loading Density Tetap:</strong> 25 kg/m
                        <br>
                        <small>Asumsi: 1 meter kolom isian = 25 kg bahan peledak</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="rockDensity">Density Batuan (œÅ)</label>
                        <div class="input-with-unit">
                            <input type="number" id="rockDensity" step="0.1" value="2.7" placeholder="Contoh: 2.7" min="1.5">
                            <div class="unit-display">ton/m¬≥</div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label for="safetyFactor">Faktor Keamanan (SF)</label>
                        <div class="input-with-unit">
                            <input type="number" id="safetyFactor" step="0.1" value="1.2" placeholder="Contoh: 1.2" min="1.0">
                            <div class="unit-display">-</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="buttons">
                <button class="calculate-btn" onclick="calculateFullSDOB()">
                    <span>üöÄ Hitung Semua Parameter</span>
                </button>
                <button class="reset-btn" onclick="resetCalculator()">
                    <span>üîÑ Reset Kalkulator</span>
                </button>
            </div>
            
            <!-- HASIL PERHITUNGAN -->
            <div class="results-container">
                <div class="result-card primary">
                    <h4>Volume Batuan per Lubang</h4>
                    <div class="result-value" id="resultVolume">-</div>
                    <div class="result-unit">m¬≥</div>
                </div>
                
                <div class="result-card primary">
                    <h4>Total Berat Bahan Peledak</h4>
                    <div class="result-value" id="resultExplosiveWeight">-</div>
                    <div class="result-unit">kg</div>
                </div>
                
                <div class="result-card primary">
                    <h4>Panjang Isian Bahan Peledak</h4>
                    <div class="result-value" id="resultLoadingLength">-</div>
                    <div class="result-unit">meter</div>
                </div>
                
                <div class="result-card primary">
                    <h4>Panjang Stemming</h4>
                    <div class="result-value" id="resultStemmingLength">-</div>
                    <div class="result-unit">meter</div>
                </div>
            </div>
            
            <!-- SDOB RESULT -->
            <div class="result-card" style="grid-column: 1 / -1; text-align: center; background: linear-gradient(135deg, #f0f9ff, #e6f7ff);">
                <h4>SCALE DEPTH OF BURIAL (SDOB)</h4>
                <div class="result-value" id="resultSDOB" style="font-size: 3rem;">-</div>
                <div class="result-unit">tak berdimensi</div>
            </div>
            
            <!-- DIAGRAM LUBANG -->
            <div class="distribution-section">
                <h3>üìä Distribusi dalam Lubang Bor</h3>
                <div class="lubang-diagram">
                    <div class="lubang-vertikal" id="holeDiagram">
                        <!-- Akan diisi oleh JavaScript -->
                    </div>
                    
                    <div class="legenda">
                        <div class="legenda-item">
                            <div class="legenda-color" style="background: linear-gradient(90deg, #8c8c8c, #595959);"></div>
                            <span>Stemming</span>
                        </div>
                        <div class="legenda-item">
                            <div class="legenda-color" style="background: linear-gradient(90deg, #ff4d4f, #cf1322);"></div>
                            <span>Bahan Peledak</span>
                        </div>
                        <div class="legenda-item">
                            <div class="legenda-color" style="background: linear-gradient(90deg, #1890ff, #096dd9);"></div>
                            <span>Subdrill</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- LANGKAH PERHITUNGAN -->
            <div class="calculation-steps">
                <h3>üßÆ Langkah-langkah Perhitungan</h3>
                <div class="step-formula" id="step1">
                    1. Volume per lubang: V = H √ó B √ó S = ...
                </div>
                <div class="step-formula" id="step2">
                    2. Total berat bahan peledak: W = V √ó PF = ...
                </div>
                <div class="step-formula" id="step3">
                    3. Panjang isian: L<sub>loading</sub> = W √∑ 25 kg/m = ...
                </div>
                <div class="step-formula" id="step4">
                    4. Panjang stemming: L<sub>stemming</sub> = H - L<sub>loading</sub> = ...
                </div>
                <div class="step-formula" id="step5">
                    5. SDOB: H<sub>eff</sub> / (W<sup>1/3</sup>) = ...
                </div>
            </div>
            
            <!-- INTERPRETASI -->
            <div class="interpretation">
                <h3>üìà Interpretasi Nilai SDOB</h3>
                
                <div class="sdob-scale">
                    <div class="scale-segment" style="background-color: #ff4d4f;">Rendah</div>
                    <div class="scale-segment" style="background-color: #ffa940;">Sedang</div>
                    <div class="scale-segment" style="background-color: #ffec3d;">Cukup</div>
                    <div class="scale-segment" style="background-color: #73d13d;">Baik</div>
                    <div class="scale-segment" style="background-color: #1890ff;">Sangat Baik</div>
                </div>
                
                <div id="interpretationText">
                    <p>Masukkan parameter untuk melihat interpretasi nilai SDOB...</p>
                </div>
            </div>
            
            <div class="footer">
                <p>Kalkulator SDOB v2.0 | Loading Density: 25 kg/m | Untuk analisis desain peledakan yang optimal</p>
            </div>
        </div>
    </div>
    
    <script>
        // Konstanta
        const LOADING_DENSITY = 25; // kg/m
        
        function calculateFullSDOB() {
            // Ambil nilai input
            const holeDepth = parseFloat(document.getElementById('holeDepth').value);
            const burden = parseFloat(document.getElementById('burden').value);
            const spacing = parseFloat(document.getElementById('spacing').value);
            const powderFactor = parseFloat(document.getElementById('powderFactor').value);
            const subdrill = parseFloat(document.getElementById('subdrill').value) || 0;
            const rockDensity = parseFloat(document.getElementById('rockDensity').value) || 2.7;
            const safetyFactor = parseFloat(document.getElementById('safetyFactor').value) || 1.2;
            
            // Validasi input
            if (!holeDepth || !burden || !spacing || !powderFactor) {
                alert("Mohon isi semua parameter utama (Kedalaman, Burden, Spasi, Powder Factor)");
                return;
            }
            
            if (holeDepth <= 0 || burden <= 0 || spacing <= 0 || powderFactor <= 0) {
                alert("Semua parameter harus bernilai positif");
                return;
            }
            
            // -------------------------------
            // LANGKAH 1: Hitung Volume
            // -------------------------------
            const rockVolume = holeDepth * burden * spacing;
            
            // -------------------------------
            // LANGKAH 2: Hitung berat bahan peledak total
            // -------------------------------
            const explosiveWeight = rockVolume * powderFactor;
            
            // -------------------------------
            // LANGKAH 3: Hitung panjang isian bahan peledak
            // -------------------------------
            const loadingLength = explosiveWeight / LOADING_DENSITY;
            
            // Validasi panjang isian
            if (loadingLength > holeDepth) {
                alert("PERHATIAN: Panjang isian (" + loadingLength.toFixed(2) + " m) melebihi kedalaman lubang (" + holeDepth + " m).\nPeriksa kembali Powder Factor atau kedalaman lubang.");
                return;
            }
            
            // -------------------------------
            // LANGKAH 4: Hitung panjang stemming
            // -------------------------------
            const stemmingLength = holeDepth - loadingLength;
            
            // -------------------------------
            // LANGKAH 5: Hitung SDOB
            // -------------------------------
            // Kedalaman efektif untuk SDOB (tanpa subdrill)
            const effectiveDepth = holeDepth - subdrill;
            const cubeRoot = Math.pow(explosiveWeight, 1/3);
            const sdobValue = effectiveDepth / cubeRoot;
            
            // Terapkan faktor keamanan
            const finalSDOB = sdobValue / safetyFactor;
            
            // -------------------------------
            // TAMPILKAN HASIL
            // -------------------------------
            // Update hasil numerik
            document.getElementById('resultVolume').textContent = rockVolume.toFixed(2);
            document.getElementById('resultExplosiveWeight').textContent = explosiveWeight.toFixed(2);
            document.getElementById('resultLoadingLength').textContent = loadingLength.toFixed(2);
            document.getElementById('resultStemmingLength').textContent = stemmingLength.toFixed(2);
            document.getElementById('resultSDOB').textContent = finalSDOB.toFixed(3);
            
            // Update langkah-langkah perhitungan
            document.getElementById('step1').textContent = `1. Volume per lubang: V = H √ó B √ó S = ${holeDepth} √ó ${burden} √ó ${spacing} = ${rockVolume.toFixed(2)} m¬≥`;
            document.getElementById('step2').textContent = `2. Total berat bahan peledak: W = V √ó PF = ${rockVolume.toFixed(2)} √ó ${powderFactor} = ${explosiveWeight.toFixed(2)} kg`;
            document.getElementById('step3').textContent = `3. Panjang isian: L_loading = W √∑ ${LOADING_DENSITY} kg/m = ${explosiveWeight.toFixed(2)} √∑ ${LOADING_DENSITY} = ${loadingLength.toFixed(2)} m`;
            document.getElementById('step4').textContent = `4. Panjang stemming: L_stemming = H - L_loading = ${holeDepth} - ${loadingLength.toFixed(2)} = ${stemmingLength.toFixed(2)} m`;
            document.getElementById('step5').textContent = `5. SDOB: H_eff / (W^(1/3)) = ${effectiveDepth.toFixed(2)} / (${explosiveWeight.toFixed(2)}^(1/3)) = ${sdobValue.toFixed(3)} (setelah faktor keamanan: ${finalSDOB.toFixed(3)})`;
            
            // Update diagram lubang
            updateHoleDiagram(holeDepth, loadingLength, stemmingLength, subdrill);
            
            // Update interpretasi
            updateInterpretation(finalSDOB);
            
            // Warna SDOB berdasarkan nilai
            colorizeSDOB(finalSDOB);
        }
        
        function updateHoleDiagram(totalDepth, loadingLength, stemmingLength, subdrill) {
            const diagram = document.getElementById('holeDiagram');
            diagram.innerHTML = '';
            
            // Hitung persentase
            const totalHeight = 300; // px
            const loadingPercent = (loadingLength / totalDepth) * 100;
            const stemmingPercent = (stemmingLength / totalDepth) * 100;
            const subdrillPercent = (subdrill / totalDepth) * 100;
            
            // Buat bagian-bagian
            // Subdrill (bawah)
            if (subdrill > 0) {
                const subdrillHeight = (subdrillPercent / 100) * totalHeight;
                const subdrillEl = document.createElement('div');
                subdrillEl.className = 'bagian subdrill';
                subdrillEl.style.height = subdrillHeight + 'px';
                subdrillEl.style.bottom = '0';
                subdrillEl.innerHTML = `Subdrill<br>${subdrill.toFixed(1)} m`;
                diagram.appendChild(subdrillEl);
            }
            
            // Loading (tengah)
            const loadingHeight = (loadingPercent / 100) * totalHeight;
            const loadingEl = document.createElement('div');
            loadingEl.className = 'bagian loading';
            loadingEl.style.height = loadingHeight + 'px';
            loadingEl.style.bottom = (subdrillPercent / 100) * totalHeight + 'px';
            loadingEl.innerHTML = `Bahan Peledak<br>${loadingLength.toFixed(1)} m`;
            diagram.appendChild(loadingEl);
            
            // Stemming (atas)
            const stemmingHeight = (stemmingPercent / 100) * totalHeight;
            const stemmingEl = document.createElement('div');
            stemmingEl.className = 'bagian stemming';
            stemmingEl.style.height = stemmingHeight + 'px';
            stemmingEl.style.bottom = ((subdrillPercent + loadingPercent) / 100) * totalHeight + 'px';
            stemmingEl.innerHTML = `Stemming<br>${stemmingLength.toFixed(1)} m`;
            diagram.appendChild(stemmingEl);
        }
        
        function updateInterpretation(sdobValue) {
            const interpretationEl = document.getElementById('interpretationText');
            let interpretation = '';
            let recommendation = '';
            let color = '';
            
            if (sdobValue < 0.3) {
                interpretation = "PROTEKSI SANGAT RENDAH";
                recommendation = "Struktur sangat rentan terhadap efek ledakan. Risiko kerusakan tinggi.";
                color = "#ff4d4f";
            } else if (sdobValue < 0.5) {
                interpretation = "PROTEKSI RENDAH";
                recommendation = "Perlu peningkatan parameter untuk proteksi yang lebih baik.";
                color = "#ffa940";
            } else if (sdobValue < 0.7) {
                interpretation = "PROTEKSI CUKUP";
                recommendation = "Memadai untuk beberapa aplikasi, tetapi pertimbangkan optimasi.";
                color = "#ffec3d";
            } else if (sdobValue < 1.0) {
                interpretation = "PROTEKSI BAIK";
                recommendation = "Parameter peledakan optimal untuk kebanyakan aplikasi.";
                color = "#73d13d";
            } else {
                interpretation = "PROTEKSI SANGAT BAIK";
                recommendation = "Konfigurasi sangat aman untuk struktur protektif.";
                color = "#1890ff";
            }
            
            interpretationEl.innerHTML = `
                <div style="background: ${color}20; padding: 15px; border-radius: 8px; border-left: 4px solid ${color};">
                    <h4 style="color: ${color}; margin: 0 0 10px 0;">${interpretation} (SDOB = ${sdobValue.toFixed(3)})</h4>
                    <p style="margin: 0 0 10px 0; color: #262626;">${recommendation}</p>
                    <p style="margin: 0; font-size: 14px; color: #595959;">
                        <strong>Rekomendasi:</strong> 
                        ${sdobValue < 0.7 ? 
                            'Tingkatkan kedalaman lubang atau kurangi powder factor untuk meningkatkan SDOB.' : 
                            'Parameter sudah optimal. Pertahankan desain peledakan ini.'}
                    </p>
                </div>
            `;
        }
        
        function colorizeSDOB(sdobValue) {
            const sdobElement = document.getElementById('resultSDOB');
            let color;
            
            if (sdobValue < 0.3) color = "#ff4d4f";
            else if (sdobValue < 0.5) color = "#ffa940";
            else if (sdobValue < 0.7) color = "#ffec3d";
            else if (sdobValue < 1.0) color = "#73d13d";
            else color = "#1890ff";
            
            sdobElement.style.color = color;
        }
        
        function resetCalculator() {
            // Reset input
            document.getElementById('holeDepth').value = '';
            document.getElementById('burden').value = '';
            document.getElementById('spacing').value = '';
            document.getElementById('powderFactor').value = '';
            document.getElementById('subdrill').value = '1.0';
            document.getElementById('rockDensity').value = '2.7';
            document.getElementById('safetyFactor').value = '1.2';
            
            // Reset hasil
            document.getElementById('resultVolume').textContent = '-';
            document.getElementById('resultExplosiveWeight').textContent = '-';
            document.getElementById('resultLoadingLength').textContent = '-';
            document.getElementById('resultStemmingLength').textContent = '-';
            document.getElementById('resultSDOB').textContent = '-';
            document.getElementById('resultSDOB').style.color = '#1890ff';
            
            // Reset langkah
            document.getElementById('step1').textContent = '1. Volume per lubang: V = H √ó B √ó S = ...';
            document.getElementById('step2').textContent = '2. Total berat bahan peledak: W = V √ó PF = ...';
            document.getElementById('step3').textContent = `3. Panjang isian: L_loading = W √∑ ${LOADING_DENSITY} kg/m = ...`;
            document.getElementById('step4').textContent = '4. Panjang stemming: L_stemming = H - L_loading = ...';
            document.getElementById('step5').textContent = '5. SDOB: H_eff / (W^(1/3)) = ...';
            
            // Reset diagram
            document.getElementById('holeDiagram').innerHTML = '';
            
            // Reset interpretasi
            document.getElementById('interpretationText').innerHTML = 
                '<p>Masukkan parameter untuk melihat interpretasi nilai SDOB...</p>';
        }
        
        // Auto-focus pada input pertama
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('holeDepth').focus();
        });
    </script>
</body>
</html>