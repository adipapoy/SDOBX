<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator SDOB - Perhitungan Skala Kedalaman Penguburan</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c2b5e, #1c3f7a);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(90deg, #1a365d, #2d4a7c);
            color: white;
            padding: 25px 30px;
            text-align: center;
            border-bottom: 5px solid #4299e1;
            position: relative;
        }
        
        /* TOMBOL BACK KE HOME */
        .back-to-home {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }
        
        .back-to-home:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-3px);
        }
        
        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .content {
            padding: 30px;
        }
        
        /* PANEL INPUT TUNGGAL */
        .single-input-panel {
            background: linear-gradient(135deg, #f0f9ff, #e6f7ff);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid #1890ff;
            box-shadow: 0 8px 25px rgba(24, 144, 255, 0.15);
        }
        
        .single-input-panel h2 {
            color: #1a365d;
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .input-grid-single {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
        }
        
        .input-section-single {
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            border: 2px solid #bae7ff;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .input-section-single h3 {
            color: #1d39c4;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #1890ff;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #262626;
            font-size: 15px;
        }
        
        .input-with-unit {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .input-with-unit input {
            flex: 1;
        }
        
        .unit-display {
            background: #1890ff;
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            font-weight: 600;
            min-width: 70px;
            text-align: center;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #d9d9d9;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            background-color: white;
        }
        
        input:focus, select:focus {
            border-color: #1890ff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(24, 144, 255, 0.2);
        }
        
        .constants-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px dashed #bae7ff;
        }
        
        .constant-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e8e8e8;
        }
        
        .constant-label {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .constant-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #1890ff;
            margin: 5px 0;
        }
        
        .constant-unit {
            font-size: 12px;
            color: #999;
            font-style: italic;
        }
        
        .loading-density-note {
            background: #f6ffed;
            border: 1px solid #b7eb8f;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            color: #135200;
            text-align: center;
        }
        
        .diameter-note {
            background: #fff7e6;
            border: 1px solid #ffd591;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            color: #874d00;
            text-align: center;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin: 30px 0;
        }
        
        button {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .calculate-btn {
            background: linear-gradient(90deg, #1890ff, #096dd9);
            color: white;
        }
        
        .calculate-btn:hover {
            background: linear-gradient(90deg, #096dd9, #0050b3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(24, 144, 255, 0.3);
        }
        
        .reset-btn {
            background: linear-gradient(90deg, #ff4d4f, #cf1322);
            color: white;
        }
        
        .reset-btn:hover {
            background: linear-gradient(90deg, #cf1322, #a8071a);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 77, 79, 0.3);
        }
        
        .back-btn {
            background: linear-gradient(90deg, #8c8c8c, #595959);
            color: white;
        }
        
        .back-btn:hover {
            background: linear-gradient(90deg, #595959, #262626);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(140, 140, 140, 0.3);
        }
        
        .results-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .result-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 2px solid #e8e8e8;
            transition: transform 0.3s;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            border-color: #1890ff;
        }
        
        .result-card.primary {
            border-color: #1890ff;
            background: #f0f9ff;
        }
        
        .result-card h4 {
            color: #595959;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .result-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #1890ff;
            margin: 15px 0;
        }
        
        .result-unit {
            color: #8c8c8c;
            font-size: 14px;
            font-style: italic;
        }
        
        /* VISUALISASI SIMULASI LUBANG */
        .simulation-section {
            background: #fff7e6;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #ffd591;
        }
        
        .simulation-section h3 {
            color: #874d00;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .hole-simulation {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 2px dashed #d9d9d9;
        }
        
        .hole-container {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }
        
        .hole-title {
            text-align: center;
            margin-bottom: 15px;
            font-weight: 600;
            color: #262626;
        }
        
        .hole-visual {
            width: 80px;
            height: 350px;
            margin: 0 auto;
            border: 2px solid #595959;
            border-radius: 8px;
            position: relative;
            background: linear-gradient(to bottom, #f5f5f5, #e0e0e0);
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
        }
        
        .hole-segment {
            position: absolute;
            width: 100%;
            left: 0;
            text-align: center;
            color: white;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.5s ease;
            box-shadow: inset 0 0 3px rgba(0,0,0,0.1);
        }
        
        .hole-segment.stemming {
            background: linear-gradient(90deg, #8c8c8c, #595959);
            border-radius: 6px 6px 0 0;
        }
        
        .hole-segment.loading {
            background: linear-gradient(90deg, #ff4d4f, #cf1322);
        }
        
        .hole-segment.empty {
            background: linear-gradient(to bottom, #f5f5f5, #e0e0e0);
            color: #666;
        }
        
        .simulation-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            width: 100%;
            max-width: 400px;
            margin-top: 20px;
        }
        
        .detail-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e8e8e8;
        }
        
        .detail-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1890ff;
        }
        
        .detail-unit {
            font-size: 12px;
            color: #999;
        }
        
        .legenda {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .legenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legenda-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .sdob-formula {
            background: #e6f7ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid #91d5ff;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            text-align: center;
        }
        
        .interpretation {
            background: #f6ffed;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #b7eb8f;
        }
        
        .interpretation h3 {
            color: #135200;
            margin-bottom: 15px;
        }
        
        /* SKALA INTERPRETASI */
        .sdob-scale {
            display: flex;
            height: 40px;
            border-radius: 20px;
            overflow: hidden;
            margin: 20px 0;
            border: 2px solid #d9d9d9;
        }
        
        .scale-segment {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 11px;
            text-align: center;
            line-height: 1.2;
            padding: 0 3px;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #8c8c8c;
            font-size: 14px;
            border-top: 1px solid #e8e8e8;
            margin-top: 30px;
        }
        
        @media (max-width: 768px) {
            .input-grid-single {
                grid-template-columns: 1fr;
            }
            
            .results-container {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 1.8rem;
                padding-top: 10px;
            }
            
            .back-to-home {
                position: relative;
                top: 0;
                left: 0;
                margin-bottom: 10px;
                width: 100%;
                justify-content: center;
            }
            
            .simulation-details {
                grid-template-columns: 1fr;
            }
            
            .hole-visual {
                width: 60px;
                height: 300px;
            }
            
            .sdob-scale {
                flex-direction: column;
                height: auto;
            }
            
            .scale-segment {
                height: 30px;
                font-size: 10px;
            }
            
            .constants-info {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <!-- TOMBOL BACK KE HOME - LINK KE HOMEPAGE -->
            <a href="index.html" class="back-to-home">
                <span>‚Üê</span> Back to Home
            </a>
            
            <h1>Kalkulator SDOB - Perhitungan Skala Kedalaman Penguburan</h1>
            <p>Menghitung Scale Depth of Burial berdasarkan parameter peledakan dengan rumus D = T + (0.5 √ó L)</p>
        </div>
        
        <div class="content">
            <!-- PANEL INPUT TUNGGAL - GABUNGAN PARAMETER -->
            <div class="single-input-panel">
                <h2>‚öôÔ∏è Parameter Peledakan Terintegrasi</h2>
                
                <div class="input-grid-single">
                    <!-- Dimensi Lubang -->
                    <div class="input-section-single">
                        <h3>üìè Dimensi Lubang</h3>
                        
                        <div class="input-group">
                            <label for="holeDepth">Kedalaman Lubang (H)</label>
                            <div class="input-with-unit">
                                <input type="number" id="holeDepth" step="0.1" placeholder="Contoh: 15.0" min="1">
                                <div class="unit-display">m</div>
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="burden">Burden (B)</label>
                            <div class="input-with-unit">
                                <input type="number" id="burden" step="0.1" placeholder="Contoh: 5.0" min="0.5">
                                <div class="unit-display">m</div>
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="spacing">Spasi (S)</label>
                            <div class="input-with-unit">
                                <input type="number" id="spacing" step="0.1" placeholder="Contoh: 5.5" min="0.5">
                                <div class="unit-display">m</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Parameter Peledakan -->
                    <div class="input-section-single">
                        <h3>üí• Parameter Peledakan</h3>
                        
                        <div class="input-group">
                            <label for="powderFactor">Powder Factor (PF)</label>
                            <div class="input-with-unit">
                                <input type="number" id="powderFactor" step="0.01" placeholder="Contoh: 0.45" min="0.01">
                                <div class="unit-display">kg/m¬≥</div>
                            </div>
                            <small style="color: #666;">Berat bahan peledak per m¬≥ batuan</small>
                        </div>
                        
                        <!-- Informasi Loading Density -->
                        <div class="loading-density-note">
                            <strong>Loading Density Tetap:</strong> 25 kg/m
                            <br>
                            <small>Asumsi: 1 meter kolom isian = 25 kg bahan peledak</small>
                        </div>
                        
                        <!-- Informasi Diameter -->
                        <div class="diameter-note">
                            <strong>Diameter Lubang Bor Tetap:</strong> 0.171 m
                            <br>
                            <small>L = 10 √ó Diameter = 10 √ó 0.171 = 1.71 m</small>
                        </div>
                    </div>
                </div>
                
                <!-- Informasi Konstanta -->
                <div class="constants-info">
                    <div class="constant-item">
                        <div class="constant-label">Diameter Lubang Bor</div>
                        <div class="constant-value">0.171</div>
                        <div class="constant-unit">meter</div>
                    </div>
                    
                    <div class="constant-item">
                        <div class="constant-label">Parameter L</div>
                        <div class="constant-value">1.71</div>
                        <div class="constant-unit">m (10 √ó Diameter)</div>
                    </div>
                    
                    <div class="constant-item">
                        <div class="constant-label">Loading Density</div>
                        <div class="constant-value">25.0</div>
                        <div class="constant-unit">kg/m</div>
                    </div>
                    
                    <div class="constant-item">
                        <div class="constant-label">Parameter W</div>
                        <div class="constant-value">42.75</div>
                        <div class="constant-unit">kg (Loading Density √ó L)</div>
                    </div>
                </div>
            </div>
            
            <!-- Rumus SDOB -->
            <div class="sdob-formula">
                <strong>RUMUS SDOB:</strong> SDOB = D / (W^(1/3))
                <br>
                Dimana: D = T + (0.5 √ó L) dan W = Loading Density √ó L
                <br>
                T = Panjang Stemming, L = 10 √ó Diameter Lubang Bor = 1.71 m
            </div>
            
            <div class="buttons">
                <button class="calculate-btn" onclick="calculateFullSDOB()">
                    <span>üöÄ Hitung SDOB & Lihat Simulasi</span>
                </button>
                <button class="reset-btn" onclick="resetCalculator()">
                    <span>üîÑ Reset Kalkulator</span>
                </button>
                <!-- TOMBOL BACK ALTERNATIF - JUGA LINK KE HOMEPAGE -->
                <button class="back-btn" onclick="window.location.href='index.html'">
                    <span>üè† Back to Home</span>
                </button>
            </div>
            
            <!-- VISUALISASI SIMULASI LUBANG -->
            <div class="simulation-section">
                <h3>üìä Simulasi Distribusi dalam Lubang Bor</h3>
                <div class="hole-simulation">
                    <div class="hole-container">
                        <div class="hole-title">Visualisasi Lubang Bor (Sisi Vertikal)</div>
                        <div class="hole-visual" id="holeVisualization">
                            <!-- Akan diisi oleh JavaScript -->
                        </div>
                    </div>
                    
                    <div class="simulation-details">
                        <div class="detail-item">
                            <div class="detail-label">Total Kedalaman</div>
                            <div class="detail-value" id="visTotalDepth">-</div>
                            <div class="detail-unit">meter</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Panjang Isian</div>
                            <div class="detail-value" id="visLoadingLength">-</div>
                            <div class="detail-unit">meter</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Panjang Stemming</div>
                            <div class="detail-value" id="visStemmingLength">-</div>
                            <div class="detail-unit">meter</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">% Isian</div>
                            <div class="detail-value" id="visLoadingPercent">-</div>
                            <div class="detail-unit">% dari total</div>
                        </div>
                    </div>
                    
                    <div class="legenda">
                        <div class="legenda-item">
                            <div class="legenda-color" style="background: linear-gradient(90deg, #ff4d4f, #cf1322);"></div>
                            <span>Bahan Peledak (Isian)</span>
                        </div>
                        <div class="legenda-item">
                            <div class="legenda-color" style="background: linear-gradient(90deg, #8c8c8c, #595959);"></div>
                            <span>Stemming</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- HASIL PERHITUNGAN -->
            <div class="results-container">
                <div class="result-card primary">
                    <h4>Volume Batuan per Lubang</h4>
                    <div class="result-value" id="resultVolume">-</div>
                    <div class="result-unit">m¬≥</div>
                </div>
                
                <div class="result-card primary">
                    <h4>Berat Bahan Peledak</h4>
                    <div class="result-value" id="resultExplosiveWeight">-</div>
                    <div class="result-unit">kg</div>
                </div>
                
                <div class="result-card primary">
                    <h4>Panjang Kolom Isian</h4>
                    <div class="result-value" id="resultLoadingLength">-</div>
                    <div class="result-unit">meter</div>
                </div>
                
                <div class="result-card primary">
                    <h4>Panjang Kolom Stemming</h4>
                    <div class="result-value" id="resultStemmingLength">-</div>
                    <div class="result-unit">meter</div>
                </div>
            </div>
            
            <!-- HASIL SDOB DAN PARAMETER D -->
            <div class="results-container">
                <div class="result-card" style="background: #fff7e6; border-color: #ffa940;">
                    <h4>Parameter L</h4>
                    <div class="result-value" id="resultL">1.71</div>
                    <div class="result-unit">m (10 √ó Diameter)</div>
                </div>
                
                <div class="result-card" style="background: #e6fffb; border-color: #36cfc9;">
                    <h4>Parameter D</h4>
                    <div class="result-value" id="resultD">-</div>
                    <div class="result-unit">D = T + (0.5 √ó L)</div>
                </div>
                
                <div class="result-card" style="background: #f0f9ff; border-color: #1890ff;">
                    <h4>Parameter W</h4>
                    <div class="result-value" id="resultW">42.75</div>
                    <div class="result-unit">kg (Loading Density √ó L)</div>
                </div>
            </div>
            
            <!-- SDOB RESULT -->
            <div class="result-card" style="grid-column: 1 / -1; text-align: center; background: linear-gradient(135deg, #f0f9ff, #e6f7ff); margin-top: 20px;">
                <h4>SCALE DEPTH OF BURIAL (SDOB)</h4>
                <div class="result-value" id="resultSDOB" style="font-size: 3rem;">-</div>
                <div class="result-unit">tak berdimensi</div>
            </div>
            
            <!-- INTERPRETASI BARU -->
            <div class="interpretation">
                <h3>üìà Interpretasi Nilai SDOB</h3>
                
                <!-- SKALA INTERPRETASI -->
                <div class="sdob-scale">
                    <div class="scale-segment" style="background-color: #ff4d4f;">
                        Uncontrolled Energy
                    </div>
                    <div class="scale-segment" style="background-color: #ffec3d;">
                        Controlled Energy
                    </div>
                    <div class="scale-segment" style="background-color: #73d13d;">
                        Very Controlled Energy
                    </div>
                    <div class="scale-segment" style="background-color: #1890ff;">
                        Minimal Surface Activity
                    </div>
                    <div class="scale-segment" style="background-color: #1a365d;">
                        Insignificant Surface Effect
                    </div>
                </div>
                
                <div id="interpretationText">
                    <p>Masukkan parameter untuk melihat interpretasi nilai SDOB...</p>
                </div>
                
                <!-- DESKRIPSI INTERPRETASI -->
                <div style="margin-top: 20px; background: #f0f9ff; padding: 15px; border-radius: 8px; border-left: 4px solid #1890ff;">
                    <h4 style="color: #1a365d; margin-bottom: 10px;">Penjelasan Interpretasi:</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 13px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 15px; height: 15px; background-color: #ff4d4f; border-radius: 3px;"></div>
                            <div><strong>Uncontrolled Energy:</strong> Energi ledakan tidak terkontrol, risiko tinggi</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 15px; height: 15px; background-color: #ffec3d; border-radius: 3px;"></div>
                            <div><strong>Controlled Energy:</strong> Energi terkontrol dengan baik</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 15px; height: 15px; background-color: #73d13d; border-radius: 3px;"></div>
                            <div><strong>Very Controlled Energy:</strong> Energi sangat terkontrol, optimal</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 15px; height: 15px; background-color: #1890ff; border-radius: 3px;"></div>
                            <div><strong>Minimal Surface Activity:</strong> Aktivitas permukaan minimal</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 15px; height: 15px; background-color: #1a365d; border-radius: 3px;"></div>
                            <div><strong>Insignificant Surface Effect:</strong> Efek permukaan tidak signifikan</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                <p>Kalkulator SDOB v2.1 | Loading Density: 25 kg/m | Diameter Lubang: 0.171 m</p>
                <p style="margin-top: 10px;">
                    <a href="index.html" style="color: #1890ff; text-decoration: none; font-weight: 600;">
                        ‚Üê Kembali ke Beranda
                    </a>
                </p>
            </div>
        </div>
    </div>
    
    <script>
        // KONSTANTA
        const LOADING_DENSITY = 25; // kg/m
        const HOLE_DIAMETER = 0.171; // meter
        const L = 10 * HOLE_DIAMETER; // L = 10 √ó Diameter
        const W_CONSTANT = LOADING_DENSITY * L; // W = Loading Density √ó L
        
        // Fungsi untuk kembali ke homepage
        function goToHome() {
            window.location.href = 'index.html';
        }
        
        function calculateFullSDOB() {
            // Ambil nilai input
            const holeDepth = parseFloat(document.getElementById('holeDepth').value);
            const burden = parseFloat(document.getElementById('burden').value);
            const spacing = parseFloat(document.getElementById('spacing').value);
            const powderFactor = parseFloat(document.getElementById('powderFactor').value);
            
            // Validasi input
            if (!holeDepth || !burden || !spacing || !powderFactor) {
                alert("Mohon isi semua parameter (Kedalaman, Burden, Spasi, Powder Factor)");
                return;
            }
            
            if (holeDepth <= 0 || burden <= 0 || spacing <= 0 || powderFactor <= 0) {
                alert("Semua parameter harus bernilai positif");
                return;
            }
            
            // -------------------------------
            // LANGKAH 1: Hitung Volume per lubang
            // -------------------------------
            const rockVolume = burden * spacing * holeDepth;
            
            // -------------------------------
            // LANGKAH 2: Hitung berat bahan peledak
            // -------------------------------
            const explosiveWeight = rockVolume * powderFactor;
            
            // -------------------------------
            // LANGKAH 3: Hitung panjang kolom isian
            // -------------------------------
            const loadingLength = explosiveWeight / LOADING_DENSITY;
            
            // Validasi panjang isian
            if (loadingLength > holeDepth) {
                alert("PERHATIAN: Panjang isian (" + loadingLength.toFixed(2) + " m) melebihi kedalaman lubang (" + holeDepth + " m).\nPeriksa kembali Powder Factor atau kedalaman lubang.");
                return;
            }
            
            // -------------------------------
            // LANGKAH 4: Hitung panjang kolom stemming
            // -------------------------------
            const stemmingLength = holeDepth - loadingLength;
            
            // -------------------------------
            // LANGKAH 5: Hitung Parameter D
            // D = T + (0.5 √ó L)
            // -------------------------------
            const D = stemmingLength + (0.5 * L);
            
            // -------------------------------
            // LANGKAH 6: Hitung SDOB
            // SDOB = D / (W^(1/3))
            // W = Loading Density √ó L = 25 √ó 1.71 = 42.75 kg
            // -------------------------------
            const cubeRoot = Math.pow(W_CONSTANT, 1/3);
            const sdobValue = D / cubeRoot;
            
            // -------------------------------
            // TAMPILKAN HASIL
            // -------------------------------
            // Update hasil numerik
            document.getElementById('resultVolume').textContent = rockVolume.toFixed(2);
            document.getElementById('resultExplosiveWeight').textContent = explosiveWeight.toFixed(2);
            document.getElementById('resultLoadingLength').textContent = loadingLength.toFixed(2);
            document.getElementById('resultStemmingLength').textContent = stemmingLength.toFixed(2);
            document.getElementById('resultD').textContent = D.toFixed(3);
            document.getElementById('resultL').textContent = L.toFixed(2);
            document.getElementById('resultW').textContent = W_CONSTANT.toFixed(2);
            document.getElementById('resultSDOB').textContent = sdobValue.toFixed(3);
            
            // Update visualisasi simulasi
            updateHoleVisualization(holeDepth, loadingLength, stemmingLength);
            
            // Update detail simulasi
            document.getElementById('visTotalDepth').textContent = holeDepth.toFixed(1);
            document.getElementById('visLoadingLength').textContent = loadingLength.toFixed(2);
            document.getElementById('visStemmingLength').textContent = stemmingLength.toFixed(2);
            document.getElementById('visLoadingPercent').textContent = ((loadingLength / holeDepth) * 100).toFixed(1);
            
            // Update interpretasi dengan skala baru
            updateInterpretationNew(sdobValue);
            
            // Warna SDOB berdasarkan nilai baru
            colorizeSDOBNew(sdobValue);
            
            // Scroll ke visualisasi
            document.querySelector('.simulation-section').scrollIntoView({ behavior: 'smooth' });
        }
        
        function updateHoleVisualization(totalDepth, loadingLength, stemmingLength) {
            const visualization = document.getElementById('holeVisualization');
            visualization.innerHTML = '';
            
            const totalHeight = 350; // px
            const loadingHeight = (loadingLength / totalDepth) * totalHeight;
            const stemmingHeight = (stemmingLength / totalDepth) * totalHeight;
            
            // Bagian Loading (bawah - bahan peledak)
            const loadingEl = document.createElement('div');
            loadingEl.className = 'hole-segment loading';
            loadingEl.style.height = loadingHeight + 'px';
            loadingEl.style.bottom = '0';
            loadingEl.innerHTML = `
                <div style="font-size: 14px; margin-bottom: 3px;">üí•</div>
                <div style="font-size: 11px;">${loadingLength.toFixed(1)} m</div>
                <div style="font-size: 9px; margin-top: 2px;">Isian</div>
            `;
            visualization.appendChild(loadingEl);
            
            // Bagian Stemming (atas)
            const stemmingEl = document.createElement('div');
            stemmingEl.className = 'hole-segment stemming';
            stemmingEl.style.height = stemmingHeight + 'px';
            stemmingEl.style.bottom = loadingHeight + 'px';
            stemmingEl.innerHTML = `
                <div style="font-size: 14px; margin-bottom: 3px;">ü™®</div>
                <div style="font-size: 11px;">${stemmingLength.toFixed(1)} m</div>
                <div style="font-size: 9px; margin-top: 2px;">Stemming</div>
            `;
            visualization.appendChild(stemmingEl);
            
            // Garis permukaan
            const surfaceLine = document.createElement('div');
            surfaceLine.style.position = 'absolute';
            surfaceLine.style.top = '0';
            surfaceLine.style.left = '0';
            surfaceLine.style.right = '0';
            surfaceLine.style.height = '1px';
            surfaceLine.style.background = '#333';
            surfaceLine.style.borderTop = '1px dashed #666';
            visualization.appendChild(surfaceLine);
        }
        
        function updateInterpretationNew(sdobValue) {
            const interpretationEl = document.getElementById('interpretationText');
            let interpretation = '';
            let recommendation = '';
            let color = '';
            
            if (sdobValue <= 0.88) {
                interpretation = "UNCONTROLLED ENERGY";
                recommendation = "Energi ledakan tidak terkontrol dengan baik. Risiko flyrock dan ground vibration tinggi. Perlu redesign parameter peledakan.";
                color = "#ff4d4f";
            } else if (sdobValue <= 1.42) {
                interpretation = "CONTROLLED ENERGY";
                recommendation = "Energi ledakan terkontrol dengan baik. Fragmentasi batuan optimal dengan risiko yang dapat dikelola.";
                color = "#ffec3d";
            } else if (sdobValue <= 1.82) {
                interpretation = "VERY CONTROLLED ENERGY";
                recommendation = "Energi ledakan sangat terkontrol. Fragmentasi excellent dengan minimal flyrock dan vibration.";
                color = "#73d13d";
            } else if (sdobValue <= 2.42) {
                interpretation = "MINIMAL SURFACE ACTIVITY";
                recommendation = "Aktivitas permukaan minimal. Sangat aman untuk operasi dekat struktur sensitif.";
                color = "#1890ff";
            } else {
                interpretation = "INSIGNIFICANT SURFACE EFFECT";
                recommendation = "Efek permukaan tidak signifikan. Proteksi maksimal terhadap struktur di permukaan.";
                color = "#1a365d";
            }
            
            interpretationEl.innerHTML = `
                <div style="background: ${color}20; padding: 15px; border-radius: 8px; border-left: 4px solid ${color};">
                    <h4 style="color: ${color}; margin: 0 0 10px 0;">${interpretation} (SDOB = ${sdobValue.toFixed(3)})</h4>
                    <p style="margin: 0 0 10px 0; color: #262626;">${recommendation}</p>
                    <p style="margin: 0; font-size: 14px; color: #595959;">
                        <strong>Rekomendasi:</strong> 
                        ${sdobValue <= 1.42 ? 
                            'Tingkatkan kedalaman lubang atau kurangi powder factor untuk meningkatkan SDOB.' : 
                            'Parameter sudah optimal. Pertahankan desain peledakan ini.'}
                    </p>
                </div>
            `;
        }
        
        function colorizeSDOBNew(sdobValue) {
            const sdobElement = document.getElementById('resultSDOB');
            let color;
            
            if (sdobValue <= 0.88) color = "#ff4d4f";
            else if (sdobValue <= 1.42) color = "#ffec3d";
            else if (sdobValue <= 1.82) color = "#73d13d";
            else if (sdobValue <= 2.42) color = "#1890ff";
            else color = "#1a365d";
            
            sdobElement.style.color = color;
        }
        
        function resetCalculator() {
            // Reset input
            document.getElementById('holeDepth').value = '';
            document.getElementById('burden').value = '';
            document.getElementById('spacing').value = '';
            document.getElementById('powderFactor').value = '';
            
            // Reset hasil
            document.getElementById('resultVolume').textContent = '-';
            document.getElementById('resultExplosiveWeight').textContent = '-';
            document.getElementById('resultLoadingLength').textContent = '-';
            document.getElementById('resultStemmingLength').textContent = '-';
            document.getElementById('resultD').textContent = '-';
            document.getElementById('resultSDOB').textContent = '-';
            document.getElementById('resultSDOB').style.color = '#1890ff';
            
            // Reset konstanta
            document.getElementById('resultL').textContent = L.toFixed(2);
            document.getElementById('resultW').textContent = W_CONSTANT.toFixed(2);
            
            // Reset visualisasi
            document.getElementById('holeVisualization').innerHTML = '';
            document.getElementById('visTotalDepth').textContent = '-';
            document.getElementById('visLoadingLength').textContent = '-';
            document.getElementById('visStemmingLength').textContent = '-';
            document.getElementById('visLoadingPercent').textContent = '-';
            
            // Reset interpretasi
            document.getElementById('interpretationText').innerHTML = 
                '<p>Masukkan parameter untuk melihat interpretasi nilai SDOB...</p>';
        }
        
        // Jalankan kalkulasi otomatis dengan nilai default saat halaman dimuat
        document.addEventListener('DOMContentLoaded', function() {
            // Set nilai default
            document.getElementById('holeDepth').value = 15;
            document.getElementById('burden').value = 5;
            document.getElementById('spacing').value = 5.5;
            document.getElementById('powderFactor').value = 0.45;
            
            // Jalankan kalkulasi
            setTimeout(() => {
                calculateFullSDOB();
            }, 500);
        });
    </script>
</body>
</html>
